View(test)
View(dat)
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) #%>%
View(topoclim)
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) #%>%
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
group_by(year_int) %>%
any(topoclim > -500 & topoclim < 500)
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) #%>%
test <- topoclim %>% filter(topoclim > 500)
View(test)
topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
?!%in%
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
(topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()))
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int !%in%
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
(topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()))
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
(filter(topoclim > 500) %>% select(year_int) %>% unique()))
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) #%>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) #%>%
View(topoclim)
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
View(topoclim)
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% dplyr::select(year_int) %>% unique())
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% dplyr::select(year_int) %>% unique())
filt <- topoclim %>% filter(topoclim > 500) #%>% dplyr::select(year_int) %>% unique())
View(filt)
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% select('year_int') %>% unique())
filt <- topoclim %>% filter(topoclim > 500) #%>% select('year_int') %>% unique())
names(filt)
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- topoclim %>% filter(topoclim > 500) %>% select("year_int") %>% unique())
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
test <- topoclim
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
test <- topoclim
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
test <- topoclim
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
test <- topoclim
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
test <- topoclim
filt <- test %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in%
filt <- test %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
filt <- test %>% filter(topoclim > 500) #%>% select(year_int) %>% unique())
View(filt)
filt <- test %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
View(filt)
filt <- topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in% topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique())
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in% filter(topoclim > 500) %>% select(year_int) %>% unique())
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
filter(year_int %in% (filter(topoclim > 500) %>% select(year_int) %>% unique()))
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) %>%
# for year_int, if any 'topoclim'<-500 & >500
# filter(year_int %in%
topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7))))))) #%>%
topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% unique()
test <- topoclim %>% filter(year_int %in% filter(topoclim > 500) %>% select(year_int) %>% unique())
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique())
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique())
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique()
test <- filter(topoclim, year_int %in% topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique())
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique()
test <- filter(topoclim, year_int %in% c(5,6,7))
test <- filter(topoclim, year_int %in% as.list(topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique()))
test <- filter(topoclim, year_int %in% pull(topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique()))
test <- filter(topoclim, year_int %in% topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% unique() %>% pull())
test
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% pull() %>% unique()
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% pull()
topoclim %>%  filter(topoclim > 500) %>% select(year_int) %>% pull() %>% unique()
test <- filter(topoclim, year_int %in% topoclim %>% filter(topoclim > 500) %>% select(year_int) %>% pull() %>% unique())
test <- filter(topoclim, year_int %in% filter(topoclim, topoclim > 500) %>% select(year_int) %>% pull() %>% unique())
test <- filter(topoclim, year_int %in% filter(., topoclim > 500) %>% select(year_int) %>% pull() %>% unique())
test <- filter(topoclim, year_int %in% filter(topoclim, topoclim > 500) %>% select(year_int) %>% pull() %>% unique())
as.vector(filter(topoclim, topoclim > 500) %>% select(year_int))
unique(as.vector(filter(topoclim, topoclim > 500) %>% select(year_int)))
# topo dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topoclim'<-500 & >500
to.remove <- topoclim %>% filter(topoclim > 500) %>% select(year_int)
to.remove
# for year_int, if any 'topoclim'<-500 & >500
to.remove <- topoclim %>% filter(topoclim > 500) %>%
select(year_int) %>% pull() %>% unique()
# for year_int, if any 'topoclim'<-500 & >500
to.remove <- topoclim %>% filter(topoclim > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
topoclim <- topoclim %>% filter(year_int ! %in% to.remove)
to.remove
# filter(year_int %in%
topoclim <- topoclim %>% filter(!year_int %in% to.remove)
View(topoclim)
# base dataframe of rmse's
base <- BASE %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'base', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'base'<-500 & >500
to.remove <- base %>% filter(base > 500) %>%
select(year_int) %>% pull() %>% unique()
to.remove
# filter(year_int %in%
base <- base %>% filter(!year_int %in% to.remove)
# climate dataframe of rmse
clim <- CLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'clim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'clim'<-500 & >500
to.remove <- clim %>% filter(clim > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
clim <- clim %>% filter(!year_int %in% to.remove)
# topo dataframe of rmse
topo <- TOPO %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topo', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topo'<-500 & >500
to.remove <- topo %>% filter(topo > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
topo <- topo %>% filter(!year_int %in% to.remove)
# topoclim dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topoclim'<-500 & >500
to.remove <- topoclim %>% filter(topoclim > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
topoclim <- topoclim %>% filter(!year_int %in% to.remove)
# combine rmse dataframes
dat <- base %>% full_join(., clim) %>%
full_join(., topo) %>%
full_join(., topoclim) %>%
pivot_longer(c(base, clim, topo, topoclim), names_to = 'model',
values_to = 'rmse') %>%
# pivot_longer(c(base, clim), names_to = 'model', values_to = 'rmse') %>%
mutate(year_int = as.factor(year_int))
# colors
group.cols <- c("#F8766D","#00BFC4","#C77Cff","#7CAE00")
(rmse.plot <- dat %>%
#filter(model=='topo'|model=='topoclim') %>% # for plotting topos only
ggplot(aes(x = year_int, y = rmse, col = model), col = cols) +
geom_boxplot(outlier.shape = NA) +
labs(y = 'NRMSE', x = "5 year chunks out") +
scale_y_continuous(limits = c(0, 0.6)) +
scale_color_manual(values=group.cols) +
theme_bw()) # NA's are the shorter length of iterations for 2 of the models
to.remove
# topoclim dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topoclim'<-500 & >500
to.remove <- topoclim %>% filter(topoclim > 500) %>%
select(year_int) %>% pull() %>% unique()
to.remove
# filter(year_int %in%
topoclim <- topoclim %>% filter(!year_int %in% to.remove)
View(topoclim)
# for year_int, if any 'topo'<-500 & >500
to.remove <- topo %>% filter(topo > 500) %>%
select(year_int) %>% pull() %>% unique()
to.remove
# topo dataframe of rmse
topo <- TOPO %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topo', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topo'<-500 & >500
to.remove <- topo %>% filter(topo > 500) %>%
select(year_int) %>% pull() %>% unique()
to.remove
# base dataframe of rmse's
base <- BASE %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'base', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'base'<-500 & >500
to.remove <- base %>% filter(base > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
base <- base %>% filter(!year_int %in% to.remove)
# climate dataframe of rmse
clim <- CLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'clim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'clim'<-500 & >500
to.remove <- clim %>% filter(clim > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
clim <- clim %>% filter(!year_int %in% to.remove)
# topo dataframe of rmse
topo <- TOPO %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topo', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topo'<-500 & >500
to.remove <- topo %>% filter(topo > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
topo <- topo %>% filter(!year_int %in% to.remove)
# topoclim dataframe of rmse
topoclim <- TOPOCLIM %>% normalized_rmse(.,obs) %>% as.data.frame() %>%
mutate('year' = seq(1,36,1)) %>%
pivot_longer(starts_with('V'), values_to = 'topoclim', names_to = 'iteration') %>%
filter(year != 1) %>%
mutate(year_int = if_else(year<7,1,
if_else(year<12, 2,
if_else(year<17, 3,
if_else(year<22, 4,
if_else(year<27, 5,
if_else(year<32, 6, 7)))))))
# for year_int, if any 'topoclim'<-500 & >500
to.remove <- topoclim %>% filter(topoclim > 500) %>%
select(year_int) %>% pull() %>% unique()
# filter(year_int %in%
topoclim <- topoclim %>% filter(!year_int %in% to.remove)
# combine rmse dataframes
dat <- base %>% full_join(., clim) %>%
full_join(., topo) %>%
full_join(., topoclim) %>%
pivot_longer(c(base, clim, topo, topoclim), names_to = 'model',
values_to = 'rmse') %>%
# pivot_longer(c(base, clim), names_to = 'model', values_to = 'rmse') %>%
mutate(year_int = as.factor(year_int))
# colors
group.cols <- c("#F8766D","#00BFC4","#C77Cff","#7CAE00")
(rmse.plot <- dat %>%
#filter(model=='topo'|model=='topoclim') %>% # for plotting topos only
ggplot(aes(x = year_int, y = rmse, col = model), col = cols) +
geom_boxplot(outlier.shape = NA) +
labs(y = 'NRMSE', x = "5 year chunks out") +
scale_y_continuous(limits = c(0, 0.6)) +
scale_color_manual(values=group.cols) +
theme_bw()) # NA's are the shorter length of iterations for 2 of the models
saveRDS(rmse.plot, "R:/Shriver_Lab/PJspread/evaluate_out_of_sample/35y_OOS_1_near_predictions/rmse_5yr_chunks_5y_avg_init_reletavized_rm_NaNs.rds")
